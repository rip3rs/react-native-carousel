var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard");Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends"));var _objectSpread2=_interopRequireDefault(require("@babel/runtime/helpers/objectSpread"));var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf3=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));var _react=_interopRequireWildcard(require("react"));var _reactNative=require("react-native");var _bullets=_interopRequireDefault(require("./options/bullets"));var _arrows=_interopRequireDefault(require("./options/arrows"));var _jsxFileName="/Users/rip3rs/Documents/work/personal/react-native-carousel/src/carousel.js";var Carousel=function(_Component){(0,_inherits2.default)(Carousel,_Component);function Carousel(){var _getPrototypeOf2;var _this;(0,_classCallCheck2.default)(this,Carousel);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=(0,_possibleConstructorReturn2.default)(this,(_getPrototypeOf2=(0,_getPrototypeOf3.default)(Carousel)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.scrollView=null;_this.state=_this.initState();_this.loopIntervalIsOn=false;_this.dimensions={width:_reactNative.Dimensions.get("window").width,height:_reactNative.Dimensions.get("window").height};_this.onPageSelectedHandler=function(e){_this.calcIndex(e.nativeEvent.position);};_this.onPageScrollStateHandler=function(e){switch(true){case e==="dragging":console.log("on the draag");_this.loopIntervalIsOn=false;clearInterval(_this.loopInterval);console.log(_this.loopInterval);break;case e==="idle"&&!_this.loopIntervalIsOn:_this.loop();break;}};_this.loop=function(){var loopTimer=_this.props.loopTimer;_this.loopIntervalIsOn=true;_this.loopInterval=setInterval(function(){return _this.calcIndex(_this.state.index+1,true);},loopTimer*1000);};_this.calcIndex=function(i){var animated=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var index=i;var loopJump=false;if(index<=0){index=_this.state.total;loopJump=true;}else if(index>_this.state.total){index=1;loopJump=true;}_this.setState((0,_objectSpread2.default)({},_this.state,{index:index,loopJump:loopJump}),function(){return _this.loopJump(animated);});};_this.loopJump=function(animated){var _this$state=_this.state,index=_this$state.index,loopJump=_this$state.loopJump;if(!animated&&!loopJump)return;_this.scrollView[animated&&!loopJump?"setPage":"setPageWithoutAnimation"](index);};_this.scrollBy=function(i){var _this$state2=_this.state,index=_this$state2.index,total=_this$state2.total;var newIndex=i+index;if(total<2)return;_this.calcIndex(newIndex,true);};return _this;}(0,_createClass2.default)(Carousel,[{key:"initState",value:function initState(){var children=this.props.children;return{total:children?children.length||1:0,index:1,loopJump:false};}},{key:"componentDidMount",value:function componentDidMount(){var total=this.state.total;var loop=this.props.loop;if(total>1&&loop)this.loop();}},{key:"componentWillUnmount",value:function componentWillUnmount(){clearInterval(this.loopInterval);}},{key:"render",value:function render(){var _this2=this;var children=this.props.children;var _this$state3=this.state,index=_this$state3.index,total=_this$state3.total;var indexes=[];var pages=[]||{};if(total>1){indexes=children.reduce(function(p,n,i){p.push(i);return p;},[]);indexes.unshift(total-1);indexes.push(0);pages=indexes.map(function(page,i){return _react.default.createElement(_reactNative.View,{key:i,__source:{fileName:_jsxFileName,lineNumber:149}},children[page].component);});}else{pages=[_react.default.createElement(_reactNative.View,{key:0,__source:{fileName:_jsxFileName,lineNumber:152}},children)];}return _react.default.createElement(_reactNative.View,{style:[styles.container],__source:{fileName:_jsxFileName,lineNumber:156}},_react.default.createElement(_reactNative.ViewPagerAndroid,(0,_extends2.default)({ref:function ref(_ref){return _this2.scrollView=_ref;}},this.props,{initialPage:index,onPageSelected:this.onPageSelectedHandler,onPageScrollStateChanged:this.onPageScrollStateHandler,key:_react.default.Children.count(indexes),pageMargin:20,style:[styles.wrapperAndroid],__source:{fileName:_jsxFileName,lineNumber:157}}),pages),this.props.bullets&&total>1?_react.default.createElement(_bullets.default,{index:index,total:total,calcIndexHandler:this.calcIndex,__source:{fileName:_jsxFileName,lineNumber:171}}):null,this.props.arrows?_react.default.createElement(_arrows.default,{dimensions:this.dimensions,scrollByHandler:this.scrollBy,__source:{fileName:_jsxFileName,lineNumber:178}}):null);}}]);return Carousel;}(_react.Component);Carousel.defaultProps={loop:true,arrows:true,bullets:true,loopTimer:5};var _default=Carousel;exports.default=_default;var styles={container:{backgroundColor:"transparent",position:"relative",flex:1,height:"100%",width:"100%",display:"flex",justifyContent:"center",alignItems:"center"},wrapperAndroid:{height:"100%",width:"100%",display:"flex",justifyContent:"center",alignItems:"center"},buttonWrapper:{backgroundColor:"transparent",flexDirection:"row",position:"absolute",top:0,left:0,flex:1,paddingHorizontal:10,paddingVertical:10,justifyContent:"space-between",alignItems:"center"},buttonText:{fontSize:150,color:"#007aff"}};